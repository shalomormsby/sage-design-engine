@import url('https://api.fontshare.com/v2/css?f[]=clash-display@1&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --color-background: #ffffff;
    --color-background-secondary: #fafafa;
    --color-background-tertiary: #f5f5f5;
    --color-foreground: #0a0a0a;
    --color-text-secondary: #525252;
    --color-text-muted: #a3a3a3;

    --color-primary: #0a0a0a;
    --color-primary-foreground: #ffffff;

    --color-secondary: #f5f5f5;
    --color-secondary-foreground: #0a0a0a;

    --color-accent: #0070f3;
    --color-accent-foreground: #ffffff;

    --color-destructive: #ef4444;
    --color-destructive-foreground: #ffffff;

    --color-muted: #f5f5f5;
    --color-muted-foreground: #737373;

    --color-popover: #ffffff;
    --color-popover-foreground: #0a0a0a;

    --color-card: #ffffff;
    --color-card-foreground: #0a0a0a;

    --color-success: #00a86b;
    --color-success-foreground: #ffffff;

    --color-warning: #f59e0b;
    --color-warning-foreground: #ffffff;

    --color-error: #ef4444;
    --color-error-foreground: #ffffff;

    --color-info: #0070f3;
    --color-info-foreground: #ffffff;

    --color-surface: #fafafa;
    --color-border: #d4d4d4;
    --color-input: #d4d4d4;
    --color-ring: #0a0a0a;

    --color-glass: rgba(255, 255, 255, 0.7);
    --color-glass-border: rgba(0, 0, 0, 0.1);

    --radius: 0.5rem;

    /* Fonts */
    --font-header-logo: var(--font-terra-body);
    --font-header-nav: var(--font-terra-body);

    /* Interaction Tokens */
    --color-interaction-overlay: #000000;
    --opacity-interaction-hover: 0.08;
    --scale-interaction-active: 0.98;

    --color-interaction-focus-ring: var(--color-ring);
    --width-interaction-focus-ring: 2px;
    --width-interaction-focus-offset: 2px;

    --opacity-interaction-disabled: 0.5;
  }

  .dark {
    --color-background: #000000;
    --color-background-secondary: #171717;
    --color-background-tertiary: #262626;
    --color-foreground: #fafafa;
    --color-text-secondary: #a3a3a3;
    --color-text-muted: #858585;

    --color-primary: #ffffff;
    --color-primary-foreground: #0a0a0a;

    --color-secondary: #262626;
    --color-secondary-foreground: #fafafa;

    --color-accent: #0090ff;
    --color-accent-foreground: #ffffff;

    --color-destructive: #ef4444;
    --color-destructive-foreground: #ffffff;

    --color-muted: #262626;
    --color-muted-foreground: #a3a3a3;

    --color-popover: #0a0a0a;
    --color-popover-foreground: #fafafa;

    --color-card: #0a0a0a;
    --color-card-foreground: #fafafa;

    --color-success: #10b981;
    --color-success-foreground: #ffffff;

    --color-warning: #f59e0b;
    --color-warning-foreground: #ffffff;

    --color-error: #ef4444;
    --color-error-foreground: #ffffff;

    --color-info: #0090ff;
    --color-info-foreground: #ffffff;

    --color-surface: #171717;
    --color-border: #404040;
    --color-input: #404040;
    --color-ring: #d4d4d4;

    --color-glass: rgba(0, 0, 0, 0.7);
    --color-glass-border: rgba(255, 255, 255, 0.1);

    /* Interaction Tokens - Dark Mode (Brightening) */
    --color-interaction-overlay: #ffffff;
    --opacity-interaction-hover: 0.08;

    --color-interaction-focus-ring: var(--color-ring);
  }
}

html.dark {
  background-color: black;
}

/* ... */

.terra-interactive {
  position: relative;
  isolation: isolate;
  /* Create new stacking context */
  transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
}

.terra-interactive:focus-visible {
  outline: var(--width-interaction-focus-ring) solid var(--color-interaction-focus-ring);
  outline-offset: var(--width-interaction-focus-offset);
  border-radius: inherit;
}

.terra-interactive[disabled],
.terra-interactive:disabled,
.terra-interactive[aria-disabled="true"] {
  opacity: var(--opacity-interaction-disabled);
  pointer-events: none;
  cursor: not-allowed;
}

.terra-interactive::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  /* Matches parent border-radius */
  background-color: var(--color-interaction-overlay);
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
  z-index: 10;
}

/* Ensure content has higher z-index if needed, or use mix-blend-mode if appropriate. 
   With 'isolation: isolate', z-index is relative to this element. 
   If text is static, z-index 10 on absolute ::after covers it.
   We need the content to be above the overlay.
*/
.terra-interactive>* {
  position: relative;
  z-index: 20;
}

/* Or better: Use ::before/::after with mix-blend-mode, or just rely on opacity. 
   If we want the overlay to be ON TOP of the background but BELOW the text, 
   the text needs a z-index.
   
   A safer, less intrusive approach for a generic utility:
   Just put the overlay on top. If opacity is low (0.05), it TINTS the text too.
   The user disliked text darkening.
   
   "Initial brightness filter darkened text along with the background, which was undesirable."
   MATCHING THE USER'S APPROVED PATTERN:
   "absolute inset-0 bg-black/0 group-hover:bg-black/25 ... and wrapped the button text in a span with relative z-10"
   
   So .terra-interactive MUST ensure children are z-indexed above the overlay.
   But we can't easily force children to have z-index without a universal selector which is expensive.
   
   Alternative: Use `::before` for the overlay and set `z-index: 0` or `-1`?
   If `-1`, it goes behind the background of the element itself if the element has a background.
   We want it ABOVE the element's background, but BELOW the content.
   
   If the element has `background-color` set on itself, `::after` with `z-index` works if we don't set z-index on children.
   Actually, if `::after` is `z-index: 1` (or implied auto), and text is static... text is covered.
   
   User's previous manual fix:
   "wrapped the button text in a span with relative z-10"
   
   So for `SecondaryNav` items, I will need to ensure the text is wrapped or z-indexed.
   The `.terra-interactive` class can provide the overlay, but the consumer must handle content layering?
   
   OR, I can try to set `pointer-events: none` on the overlay (already done).
   If opacity is 0.08, tinting text slightly is usually acceptable, BUT the user explicitly complained about it.
   
   "Initial brightness filter darkened text..." - brightness filter affects EVERYTHING including white text.
   Black overlay (0.08) on White text -> turns it light gray.
   White overlay (0.08) on Black text -> turns it dark gray.
   It reduces contrast slightly.
   
   However, "Darkening the background while preserving text readability" was the goal.
   
   If I use `::after` for the overlay, and the element has padding, the overlay covers the padding too (good).
   
   Let's stick to the Overlay strategy. To ensure Text Readability, ideally the text is above.
   I can verify if `SecondaryNav` items have a wrapper I can z-index.
*/

.terra-interactive:hover::after {
  opacity: var(--opacity-interaction-hover);
}

.terra-interactive:active {
  transform: scale(var(--scale-interaction-active));
}

html {
  scroll-behavior: smooth;
}

@layer base {
  body {
    font-family: var(--font-body), system-ui, sans-serif;
    @apply bg-background text-foreground;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong {
    font-family: var(--font-heading), system-ui, sans-serif;
  }

  /* Apply border color globally */
  * {
    @apply border-border;
  }
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Code block styling */
pre {
  @apply rounded-lg overflow-x-auto;
}

code {
  @apply font-mono text-sm;
}